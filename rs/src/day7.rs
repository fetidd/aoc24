use std::collections::HashSet;

use aoc24::utils;

fn main() {
    let input = include_str!("../../puzzle_input/day7.txt");
    let result = process(&input);
    println!("{}", result);
}

fn process(input: &str) -> String {
    let mut total = 0;
    let lines: Vec<(i64, Vec<i64>)> = input.lines().map(|line| {
        let mut s = line.split(':');
        let test_value: i64 = s.next().unwrap().parse().unwrap();
        let equation: Vec<i64> = utils::parse_space_list(&s.collect::<String>()).unwrap();
        (test_value, equation)
    }).collect();
    let reducer_length = lines.iter().map(|(_, equation)| equation.len()).max().unwrap();
    let reducers = create_reducers(reducer_length as usize);
    'line_loop: for i in 0..lines.len() {
        let (test_value, equation) = &lines[i];
        for reducer in reducers.iter() {
            let reducer_slice = &reducer[0..equation.len()];
            let mut ans = equation[0];
            let mut eq_pointer = 1;
            while eq_pointer < equation.len() {
                match reducer_slice[eq_pointer - 1] {
                    0 => ans += equation[eq_pointer],
                    1 => ans *= equation[eq_pointer],
                    2 => ans = (ans.to_string() + &equation[eq_pointer].to_string()).parse().unwrap(),
                    _ => panic!("invalid operator"),
                }
                eq_pointer += 1;
            }
            if &ans == test_value {
                total += test_value;
                continue 'line_loop;
            }
        }
    }
    total.to_string()
}

fn create_reducers(num: usize) -> HashSet<Vec<u8>> {
    let mut reducers = vec![vec![0], vec![1], vec![2]];
    for _ in 1..num {
        for v in 0..reducers.len() {
            reducers[v].push(0);
        }
        let mut extra = reducers.clone();
        for e in 0..extra.len() {
            *extra[e].last_mut().unwrap() = 1;
        }
        reducers.extend(extra);
        let mut extra = reducers.clone();
        for e in 0..extra.len() {
            *extra[e].last_mut().unwrap() = 2;
        }
        reducers.extend(extra);
    }
    HashSet::from_iter(reducers)
}


#[cfg(test)]
mod tests {
    use std::collections::HashSet;

    use super::*;

    static EXAMPLE: &'static str = "190: 10 19\n\
                                    3267: 81 40 27\n\
                                    83: 17 5\n\
                                    156: 15 6\n\
                                    7290: 6 8 6 15\n\
                                    161011: 16 10 13\n\
                                    192: 17 8 14\n\
                                    21037: 9 7 18 13\n\
                                    292: 11 6 16 20";

    #[test]
    fn test_process() {
        assert_eq!("11387".to_string(), process(EXAMPLE));
    }

    #[test]
    fn create_reducer() {
        let actual = create_reducers(6);
        // let expected = Vec::from([
        let expected = HashSet::from([
            vec![0, 0, 0, 0, 0, 0],
            vec![1, 0, 0, 0, 0, 0],
            vec![2, 0, 0, 0, 0, 0],
            vec![0, 1, 0, 0, 0, 0],
            vec![1, 1, 0, 0, 0, 0],
            vec![2, 1, 0, 0, 0, 0],
            vec![0, 2, 0, 0, 0, 0],
            vec![1, 2, 0, 0, 0, 0],
            vec![2, 2, 0, 0, 0, 0],
            vec![0, 0, 1, 0, 0, 0],
            vec![1, 0, 1, 0, 0, 0],
            vec![2, 0, 1, 0, 0, 0],
            vec![0, 1, 1, 0, 0, 0],
            vec![1, 1, 1, 0, 0, 0],
            vec![2, 1, 1, 0, 0, 0],
            vec![0, 2, 1, 0, 0, 0],
            vec![1, 2, 1, 0, 0, 0],
            vec![2, 2, 1, 0, 0, 0],
            vec![0, 0, 2, 0, 0, 0],
            vec![1, 0, 2, 0, 0, 0],
            vec![2, 0, 2, 0, 0, 0],
            vec![0, 1, 2, 0, 0, 0],
            vec![1, 1, 2, 0, 0, 0],
            vec![2, 1, 2, 0, 0, 0],
            vec![0, 2, 2, 0, 0, 0],
            vec![1, 2, 2, 0, 0, 0],
            vec![2, 2, 2, 0, 0, 0],
            vec![0, 0, 0, 1, 0, 0],
            vec![1, 0, 0, 1, 0, 0],
            vec![2, 0, 0, 1, 0, 0],
            vec![0, 1, 0, 1, 0, 0],
            vec![1, 1, 0, 1, 0, 0],
            vec![2, 1, 0, 1, 0, 0],
            vec![0, 2, 0, 1, 0, 0],
            vec![1, 2, 0, 1, 0, 0],
            vec![2, 2, 0, 1, 0, 0],
            vec![0, 0, 1, 1, 0, 0],
            vec![1, 0, 1, 1, 0, 0],
            vec![2, 0, 1, 1, 0, 0],
            vec![0, 1, 1, 1, 0, 0],
            vec![1, 1, 1, 1, 0, 0],
            vec![2, 1, 1, 1, 0, 0],
            vec![0, 2, 1, 1, 0, 0],
            vec![1, 2, 1, 1, 0, 0],
            vec![2, 2, 1, 1, 0, 0],
            vec![0, 0, 2, 1, 0, 0],
            vec![1, 0, 2, 1, 0, 0],
            vec![2, 0, 2, 1, 0, 0],
            vec![0, 1, 2, 1, 0, 0],
            vec![1, 1, 2, 1, 0, 0],
            vec![2, 1, 2, 1, 0, 0],
            vec![0, 2, 2, 1, 0, 0],
            vec![1, 2, 2, 1, 0, 0],
            vec![2, 2, 2, 1, 0, 0],
            vec![0, 0, 0, 2, 0, 0],
            vec![1, 0, 0, 2, 0, 0],
            vec![2, 0, 0, 2, 0, 0],
            vec![0, 1, 0, 2, 0, 0],
            vec![1, 1, 0, 2, 0, 0],
            vec![2, 1, 0, 2, 0, 0],
            vec![0, 2, 0, 2, 0, 0],
            vec![1, 2, 0, 2, 0, 0],
            vec![2, 2, 0, 2, 0, 0],
            vec![0, 0, 1, 2, 0, 0],
            vec![1, 0, 1, 2, 0, 0],
            vec![2, 0, 1, 2, 0, 0],
            vec![0, 1, 1, 2, 0, 0],
            vec![1, 1, 1, 2, 0, 0],
            vec![2, 1, 1, 2, 0, 0],
            vec![0, 2, 1, 2, 0, 0],
            vec![1, 2, 1, 2, 0, 0],
            vec![2, 2, 1, 2, 0, 0],
            vec![0, 0, 2, 2, 0, 0],
            vec![1, 0, 2, 2, 0, 0],
            vec![2, 0, 2, 2, 0, 0],
            vec![0, 1, 2, 2, 0, 0],
            vec![1, 1, 2, 2, 0, 0],
            vec![2, 1, 2, 2, 0, 0],
            vec![0, 2, 2, 2, 0, 0],
            vec![1, 2, 2, 2, 0, 0],
            vec![2, 2, 2, 2, 0, 0],
            vec![0, 0, 0, 0, 1, 0],
            vec![1, 0, 0, 0, 1, 0],
            vec![2, 0, 0, 0, 1, 0],
            vec![0, 1, 0, 0, 1, 0],
            vec![1, 1, 0, 0, 1, 0],
            vec![2, 1, 0, 0, 1, 0],
            vec![0, 2, 0, 0, 1, 0],
            vec![1, 2, 0, 0, 1, 0],
            vec![2, 2, 0, 0, 1, 0],
            vec![0, 0, 1, 0, 1, 0],
            vec![1, 0, 1, 0, 1, 0],
            vec![2, 0, 1, 0, 1, 0],
            vec![0, 1, 1, 0, 1, 0],
            vec![1, 1, 1, 0, 1, 0],
            vec![2, 1, 1, 0, 1, 0],
            vec![0, 2, 1, 0, 1, 0],
            vec![1, 2, 1, 0, 1, 0],
            vec![2, 2, 1, 0, 1, 0],
            vec![0, 0, 2, 0, 1, 0],
            vec![1, 0, 2, 0, 1, 0],
            vec![2, 0, 2, 0, 1, 0],
            vec![0, 1, 2, 0, 1, 0],
            vec![1, 1, 2, 0, 1, 0],
            vec![2, 1, 2, 0, 1, 0],
            vec![0, 2, 2, 0, 1, 0],
            vec![1, 2, 2, 0, 1, 0],
            vec![2, 2, 2, 0, 1, 0],
            vec![0, 0, 0, 1, 1, 0],
            vec![1, 0, 0, 1, 1, 0],
            vec![2, 0, 0, 1, 1, 0],
            vec![0, 1, 0, 1, 1, 0],
            vec![1, 1, 0, 1, 1, 0],
            vec![2, 1, 0, 1, 1, 0],
            vec![0, 2, 0, 1, 1, 0],
            vec![1, 2, 0, 1, 1, 0],
            vec![2, 2, 0, 1, 1, 0],
            vec![0, 0, 1, 1, 1, 0],
            vec![1, 0, 1, 1, 1, 0],
            vec![2, 0, 1, 1, 1, 0],
            vec![0, 1, 1, 1, 1, 0],
            vec![1, 1, 1, 1, 1, 0],
            vec![2, 1, 1, 1, 1, 0],
            vec![0, 2, 1, 1, 1, 0],
            vec![1, 2, 1, 1, 1, 0],
            vec![2, 2, 1, 1, 1, 0],
            vec![0, 0, 2, 1, 1, 0],
            vec![1, 0, 2, 1, 1, 0],
            vec![2, 0, 2, 1, 1, 0],
            vec![0, 1, 2, 1, 1, 0],
            vec![1, 1, 2, 1, 1, 0],
            vec![2, 1, 2, 1, 1, 0],
            vec![0, 2, 2, 1, 1, 0],
            vec![1, 2, 2, 1, 1, 0],
            vec![2, 2, 2, 1, 1, 0],
            vec![0, 0, 0, 2, 1, 0],
            vec![1, 0, 0, 2, 1, 0],
            vec![2, 0, 0, 2, 1, 0],
            vec![0, 1, 0, 2, 1, 0],
            vec![1, 1, 0, 2, 1, 0],
            vec![2, 1, 0, 2, 1, 0],
            vec![0, 2, 0, 2, 1, 0],
            vec![1, 2, 0, 2, 1, 0],
            vec![2, 2, 0, 2, 1, 0],
            vec![0, 0, 1, 2, 1, 0],
            vec![1, 0, 1, 2, 1, 0],
            vec![2, 0, 1, 2, 1, 0],
            vec![0, 1, 1, 2, 1, 0],
            vec![1, 1, 1, 2, 1, 0],
            vec![2, 1, 1, 2, 1, 0],
            vec![0, 2, 1, 2, 1, 0],
            vec![1, 2, 1, 2, 1, 0],
            vec![2, 2, 1, 2, 1, 0],
            vec![0, 0, 2, 2, 1, 0],
            vec![1, 0, 2, 2, 1, 0],
            vec![2, 0, 2, 2, 1, 0],
            vec![0, 1, 2, 2, 1, 0],
            vec![1, 1, 2, 2, 1, 0],
            vec![2, 1, 2, 2, 1, 0],
            vec![0, 2, 2, 2, 1, 0],
            vec![1, 2, 2, 2, 1, 0],
            vec![2, 2, 2, 2, 1, 0],
            vec![0, 0, 0, 0, 2, 0],
            vec![1, 0, 0, 0, 2, 0],
            vec![2, 0, 0, 0, 2, 0],
            vec![0, 1, 0, 0, 2, 0],
            vec![1, 1, 0, 0, 2, 0],
            vec![2, 1, 0, 0, 2, 0],
            vec![0, 2, 0, 0, 2, 0],
            vec![1, 2, 0, 0, 2, 0],
            vec![2, 2, 0, 0, 2, 0],
            vec![0, 0, 1, 0, 2, 0],
            vec![1, 0, 1, 0, 2, 0],
            vec![2, 0, 1, 0, 2, 0],
            vec![0, 1, 1, 0, 2, 0],
            vec![1, 1, 1, 0, 2, 0],
            vec![2, 1, 1, 0, 2, 0],
            vec![0, 2, 1, 0, 2, 0],
            vec![1, 2, 1, 0, 2, 0],
            vec![2, 2, 1, 0, 2, 0],
            vec![0, 0, 2, 0, 2, 0],
            vec![1, 0, 2, 0, 2, 0],
            vec![2, 0, 2, 0, 2, 0],
            vec![0, 1, 2, 0, 2, 0],
            vec![1, 1, 2, 0, 2, 0],
            vec![2, 1, 2, 0, 2, 0],
            vec![0, 2, 2, 0, 2, 0],
            vec![1, 2, 2, 0, 2, 0],
            vec![2, 2, 2, 0, 2, 0],
            vec![0, 0, 0, 1, 2, 0],
            vec![1, 0, 0, 1, 2, 0],
            vec![2, 0, 0, 1, 2, 0],
            vec![0, 1, 0, 1, 2, 0],
            vec![1, 1, 0, 1, 2, 0],
            vec![2, 1, 0, 1, 2, 0],
            vec![0, 2, 0, 1, 2, 0],
            vec![1, 2, 0, 1, 2, 0],
            vec![2, 2, 0, 1, 2, 0],
            vec![0, 0, 1, 1, 2, 0],
            vec![1, 0, 1, 1, 2, 0],
            vec![2, 0, 1, 1, 2, 0],
            vec![0, 1, 1, 1, 2, 0],
            vec![1, 1, 1, 1, 2, 0],
            vec![2, 1, 1, 1, 2, 0],
            vec![0, 2, 1, 1, 2, 0],
            vec![1, 2, 1, 1, 2, 0],
            vec![2, 2, 1, 1, 2, 0],
            vec![0, 0, 2, 1, 2, 0],
            vec![1, 0, 2, 1, 2, 0],
            vec![2, 0, 2, 1, 2, 0],
            vec![0, 1, 2, 1, 2, 0],
            vec![1, 1, 2, 1, 2, 0],
            vec![2, 1, 2, 1, 2, 0],
            vec![0, 2, 2, 1, 2, 0],
            vec![1, 2, 2, 1, 2, 0],
            vec![2, 2, 2, 1, 2, 0],
            vec![0, 0, 0, 2, 2, 0],
            vec![1, 0, 0, 2, 2, 0],
            vec![2, 0, 0, 2, 2, 0],
            vec![0, 1, 0, 2, 2, 0],
            vec![1, 1, 0, 2, 2, 0],
            vec![2, 1, 0, 2, 2, 0],
            vec![0, 2, 0, 2, 2, 0],
            vec![1, 2, 0, 2, 2, 0],
            vec![2, 2, 0, 2, 2, 0],
            vec![0, 0, 1, 2, 2, 0],
            vec![1, 0, 1, 2, 2, 0],
            vec![2, 0, 1, 2, 2, 0],
            vec![0, 1, 1, 2, 2, 0],
            vec![1, 1, 1, 2, 2, 0],
            vec![2, 1, 1, 2, 2, 0],
            vec![0, 2, 1, 2, 2, 0],
            vec![1, 2, 1, 2, 2, 0],
            vec![2, 2, 1, 2, 2, 0],
            vec![0, 0, 2, 2, 2, 0],
            vec![1, 0, 2, 2, 2, 0],
            vec![2, 0, 2, 2, 2, 0],
            vec![0, 1, 2, 2, 2, 0],
            vec![1, 1, 2, 2, 2, 0],
            vec![2, 1, 2, 2, 2, 0],
            vec![0, 2, 2, 2, 2, 0],
            vec![1, 2, 2, 2, 2, 0],
            vec![2, 2, 2, 2, 2, 0],
            vec![0, 0, 0, 0, 0, 1],
            vec![1, 0, 0, 0, 0, 1],
            vec![2, 0, 0, 0, 0, 1],
            vec![0, 1, 0, 0, 0, 1],
            vec![1, 1, 0, 0, 0, 1],
            vec![2, 1, 0, 0, 0, 1],
            vec![0, 2, 0, 0, 0, 1],
            vec![1, 2, 0, 0, 0, 1],
            vec![2, 2, 0, 0, 0, 1],
            vec![0, 0, 1, 0, 0, 1],
            vec![1, 0, 1, 0, 0, 1],
            vec![2, 0, 1, 0, 0, 1],
            vec![0, 1, 1, 0, 0, 1],
            vec![1, 1, 1, 0, 0, 1],
            vec![2, 1, 1, 0, 0, 1],
            vec![0, 2, 1, 0, 0, 1],
            vec![1, 2, 1, 0, 0, 1],
            vec![2, 2, 1, 0, 0, 1],
            vec![0, 0, 2, 0, 0, 1],
            vec![1, 0, 2, 0, 0, 1],
            vec![2, 0, 2, 0, 0, 1],
            vec![0, 1, 2, 0, 0, 1],
            vec![1, 1, 2, 0, 0, 1],
            vec![2, 1, 2, 0, 0, 1],
            vec![0, 2, 2, 0, 0, 1],
            vec![1, 2, 2, 0, 0, 1],
            vec![2, 2, 2, 0, 0, 1],
            vec![0, 0, 0, 1, 0, 1],
            vec![1, 0, 0, 1, 0, 1],
            vec![2, 0, 0, 1, 0, 1],
            vec![0, 1, 0, 1, 0, 1],
            vec![1, 1, 0, 1, 0, 1],
            vec![2, 1, 0, 1, 0, 1],
            vec![0, 2, 0, 1, 0, 1],
            vec![1, 2, 0, 1, 0, 1],
            vec![2, 2, 0, 1, 0, 1],
            vec![0, 0, 1, 1, 0, 1],
            vec![1, 0, 1, 1, 0, 1],
            vec![2, 0, 1, 1, 0, 1],
            vec![0, 1, 1, 1, 0, 1],
            vec![1, 1, 1, 1, 0, 1],
            vec![2, 1, 1, 1, 0, 1],
            vec![0, 2, 1, 1, 0, 1],
            vec![1, 2, 1, 1, 0, 1],
            vec![2, 2, 1, 1, 0, 1],
            vec![0, 0, 2, 1, 0, 1],
            vec![1, 0, 2, 1, 0, 1],
            vec![2, 0, 2, 1, 0, 1],
            vec![0, 1, 2, 1, 0, 1],
            vec![1, 1, 2, 1, 0, 1],
            vec![2, 1, 2, 1, 0, 1],
            vec![0, 2, 2, 1, 0, 1],
            vec![1, 2, 2, 1, 0, 1],
            vec![2, 2, 2, 1, 0, 1],
            vec![0, 0, 0, 2, 0, 1],
            vec![1, 0, 0, 2, 0, 1],
            vec![2, 0, 0, 2, 0, 1],
            vec![0, 1, 0, 2, 0, 1],
            vec![1, 1, 0, 2, 0, 1],
            vec![2, 1, 0, 2, 0, 1],
            vec![0, 2, 0, 2, 0, 1],
            vec![1, 2, 0, 2, 0, 1],
            vec![2, 2, 0, 2, 0, 1],
            vec![0, 0, 1, 2, 0, 1],
            vec![1, 0, 1, 2, 0, 1],
            vec![2, 0, 1, 2, 0, 1],
            vec![0, 1, 1, 2, 0, 1],
            vec![1, 1, 1, 2, 0, 1],
            vec![2, 1, 1, 2, 0, 1],
            vec![0, 2, 1, 2, 0, 1],
            vec![1, 2, 1, 2, 0, 1],
            vec![2, 2, 1, 2, 0, 1],
            vec![0, 0, 2, 2, 0, 1],
            vec![1, 0, 2, 2, 0, 1],
            vec![2, 0, 2, 2, 0, 1],
            vec![0, 1, 2, 2, 0, 1],
            vec![1, 1, 2, 2, 0, 1],
            vec![2, 1, 2, 2, 0, 1],
            vec![0, 2, 2, 2, 0, 1],
            vec![1, 2, 2, 2, 0, 1],
            vec![2, 2, 2, 2, 0, 1],
            vec![0, 0, 0, 0, 1, 1],
            vec![1, 0, 0, 0, 1, 1],
            vec![2, 0, 0, 0, 1, 1],
            vec![0, 1, 0, 0, 1, 1],
            vec![1, 1, 0, 0, 1, 1],
            vec![2, 1, 0, 0, 1, 1],
            vec![0, 2, 0, 0, 1, 1],
            vec![1, 2, 0, 0, 1, 1],
            vec![2, 2, 0, 0, 1, 1],
            vec![0, 0, 1, 0, 1, 1],
            vec![1, 0, 1, 0, 1, 1],
            vec![2, 0, 1, 0, 1, 1],
            vec![0, 1, 1, 0, 1, 1],
            vec![1, 1, 1, 0, 1, 1],
            vec![2, 1, 1, 0, 1, 1],
            vec![0, 2, 1, 0, 1, 1],
            vec![1, 2, 1, 0, 1, 1],
            vec![2, 2, 1, 0, 1, 1],
            vec![0, 0, 2, 0, 1, 1],
            vec![1, 0, 2, 0, 1, 1],
            vec![2, 0, 2, 0, 1, 1],
            vec![0, 1, 2, 0, 1, 1],
            vec![1, 1, 2, 0, 1, 1],
            vec![2, 1, 2, 0, 1, 1],
            vec![0, 2, 2, 0, 1, 1],
            vec![1, 2, 2, 0, 1, 1],
            vec![2, 2, 2, 0, 1, 1],
            vec![0, 0, 0, 1, 1, 1],
            vec![1, 0, 0, 1, 1, 1],
            vec![2, 0, 0, 1, 1, 1],
            vec![0, 1, 0, 1, 1, 1],
            vec![1, 1, 0, 1, 1, 1],
            vec![2, 1, 0, 1, 1, 1],
            vec![0, 2, 0, 1, 1, 1],
            vec![1, 2, 0, 1, 1, 1],
            vec![2, 2, 0, 1, 1, 1],
            vec![0, 0, 1, 1, 1, 1],
            vec![1, 0, 1, 1, 1, 1],
            vec![2, 0, 1, 1, 1, 1],
            vec![0, 1, 1, 1, 1, 1],
            vec![1, 1, 1, 1, 1, 1],
            vec![2, 1, 1, 1, 1, 1],
            vec![0, 2, 1, 1, 1, 1],
            vec![1, 2, 1, 1, 1, 1],
            vec![2, 2, 1, 1, 1, 1],
            vec![0, 0, 2, 1, 1, 1],
            vec![1, 0, 2, 1, 1, 1],
            vec![2, 0, 2, 1, 1, 1],
            vec![0, 1, 2, 1, 1, 1],
            vec![1, 1, 2, 1, 1, 1],
            vec![2, 1, 2, 1, 1, 1],
            vec![0, 2, 2, 1, 1, 1],
            vec![1, 2, 2, 1, 1, 1],
            vec![2, 2, 2, 1, 1, 1],
            vec![0, 0, 0, 2, 1, 1],
            vec![1, 0, 0, 2, 1, 1],
            vec![2, 0, 0, 2, 1, 1],
            vec![0, 1, 0, 2, 1, 1],
            vec![1, 1, 0, 2, 1, 1],
            vec![2, 1, 0, 2, 1, 1],
            vec![0, 2, 0, 2, 1, 1],
            vec![1, 2, 0, 2, 1, 1],
            vec![2, 2, 0, 2, 1, 1],
            vec![0, 0, 1, 2, 1, 1],
            vec![1, 0, 1, 2, 1, 1],
            vec![2, 0, 1, 2, 1, 1],
            vec![0, 1, 1, 2, 1, 1],
            vec![1, 1, 1, 2, 1, 1],
            vec![2, 1, 1, 2, 1, 1],
            vec![0, 2, 1, 2, 1, 1],
            vec![1, 2, 1, 2, 1, 1],
            vec![2, 2, 1, 2, 1, 1],
            vec![0, 0, 2, 2, 1, 1],
            vec![1, 0, 2, 2, 1, 1],
            vec![2, 0, 2, 2, 1, 1],
            vec![0, 1, 2, 2, 1, 1],
            vec![1, 1, 2, 2, 1, 1],
            vec![2, 1, 2, 2, 1, 1],
            vec![0, 2, 2, 2, 1, 1],
            vec![1, 2, 2, 2, 1, 1],
            vec![2, 2, 2, 2, 1, 1],
            vec![0, 0, 0, 0, 2, 1],
            vec![1, 0, 0, 0, 2, 1],
            vec![2, 0, 0, 0, 2, 1],
            vec![0, 1, 0, 0, 2, 1],
            vec![1, 1, 0, 0, 2, 1],
            vec![2, 1, 0, 0, 2, 1],
            vec![0, 2, 0, 0, 2, 1],
            vec![1, 2, 0, 0, 2, 1],
            vec![2, 2, 0, 0, 2, 1],
            vec![0, 0, 1, 0, 2, 1],
            vec![1, 0, 1, 0, 2, 1],
            vec![2, 0, 1, 0, 2, 1],
            vec![0, 1, 1, 0, 2, 1],
            vec![1, 1, 1, 0, 2, 1],
            vec![2, 1, 1, 0, 2, 1],
            vec![0, 2, 1, 0, 2, 1],
            vec![1, 2, 1, 0, 2, 1],
            vec![2, 2, 1, 0, 2, 1],
            vec![0, 0, 2, 0, 2, 1],
            vec![1, 0, 2, 0, 2, 1],
            vec![2, 0, 2, 0, 2, 1],
            vec![0, 1, 2, 0, 2, 1],
            vec![1, 1, 2, 0, 2, 1],
            vec![2, 1, 2, 0, 2, 1],
            vec![0, 2, 2, 0, 2, 1],
            vec![1, 2, 2, 0, 2, 1],
            vec![2, 2, 2, 0, 2, 1],
            vec![0, 0, 0, 1, 2, 1],
            vec![1, 0, 0, 1, 2, 1],
            vec![2, 0, 0, 1, 2, 1],
            vec![0, 1, 0, 1, 2, 1],
            vec![1, 1, 0, 1, 2, 1],
            vec![2, 1, 0, 1, 2, 1],
            vec![0, 2, 0, 1, 2, 1],
            vec![1, 2, 0, 1, 2, 1],
            vec![2, 2, 0, 1, 2, 1],
            vec![0, 0, 1, 1, 2, 1],
            vec![1, 0, 1, 1, 2, 1],
            vec![2, 0, 1, 1, 2, 1],
            vec![0, 1, 1, 1, 2, 1],
            vec![1, 1, 1, 1, 2, 1],
            vec![2, 1, 1, 1, 2, 1],
            vec![0, 2, 1, 1, 2, 1],
            vec![1, 2, 1, 1, 2, 1],
            vec![2, 2, 1, 1, 2, 1],
            vec![0, 0, 2, 1, 2, 1],
            vec![1, 0, 2, 1, 2, 1],
            vec![2, 0, 2, 1, 2, 1],
            vec![0, 1, 2, 1, 2, 1],
            vec![1, 1, 2, 1, 2, 1],
            vec![2, 1, 2, 1, 2, 1],
            vec![0, 2, 2, 1, 2, 1],
            vec![1, 2, 2, 1, 2, 1],
            vec![2, 2, 2, 1, 2, 1],
            vec![0, 0, 0, 2, 2, 1],
            vec![1, 0, 0, 2, 2, 1],
            vec![2, 0, 0, 2, 2, 1],
            vec![0, 1, 0, 2, 2, 1],
            vec![1, 1, 0, 2, 2, 1],
            vec![2, 1, 0, 2, 2, 1],
            vec![0, 2, 0, 2, 2, 1],
            vec![1, 2, 0, 2, 2, 1],
            vec![2, 2, 0, 2, 2, 1],
            vec![0, 0, 1, 2, 2, 1],
            vec![1, 0, 1, 2, 2, 1],
            vec![2, 0, 1, 2, 2, 1],
            vec![0, 1, 1, 2, 2, 1],
            vec![1, 1, 1, 2, 2, 1],
            vec![2, 1, 1, 2, 2, 1],
            vec![0, 2, 1, 2, 2, 1],
            vec![1, 2, 1, 2, 2, 1],
            vec![2, 2, 1, 2, 2, 1],
            vec![0, 0, 2, 2, 2, 1],
            vec![1, 0, 2, 2, 2, 1],
            vec![2, 0, 2, 2, 2, 1],
            vec![0, 1, 2, 2, 2, 1],
            vec![1, 1, 2, 2, 2, 1],
            vec![2, 1, 2, 2, 2, 1],
            vec![0, 2, 2, 2, 2, 1],
            vec![1, 2, 2, 2, 2, 1],
            vec![2, 2, 2, 2, 2, 1],
            vec![0, 0, 0, 0, 0, 2],
            vec![1, 0, 0, 0, 0, 2],
            vec![2, 0, 0, 0, 0, 2],
            vec![0, 1, 0, 0, 0, 2],
            vec![1, 1, 0, 0, 0, 2],
            vec![2, 1, 0, 0, 0, 2],
            vec![0, 2, 0, 0, 0, 2],
            vec![1, 2, 0, 0, 0, 2],
            vec![2, 2, 0, 0, 0, 2],
            vec![0, 0, 1, 0, 0, 2],
            vec![1, 0, 1, 0, 0, 2],
            vec![2, 0, 1, 0, 0, 2],
            vec![0, 1, 1, 0, 0, 2],
            vec![1, 1, 1, 0, 0, 2],
            vec![2, 1, 1, 0, 0, 2],
            vec![0, 2, 1, 0, 0, 2],
            vec![1, 2, 1, 0, 0, 2],
            vec![2, 2, 1, 0, 0, 2],
            vec![0, 0, 2, 0, 0, 2],
            vec![1, 0, 2, 0, 0, 2],
            vec![2, 0, 2, 0, 0, 2],
            vec![0, 1, 2, 0, 0, 2],
            vec![1, 1, 2, 0, 0, 2],
            vec![2, 1, 2, 0, 0, 2],
            vec![0, 2, 2, 0, 0, 2],
            vec![1, 2, 2, 0, 0, 2],
            vec![2, 2, 2, 0, 0, 2],
            vec![0, 0, 0, 1, 0, 2],
            vec![1, 0, 0, 1, 0, 2],
            vec![2, 0, 0, 1, 0, 2],
            vec![0, 1, 0, 1, 0, 2],
            vec![1, 1, 0, 1, 0, 2],
            vec![2, 1, 0, 1, 0, 2],
            vec![0, 2, 0, 1, 0, 2],
            vec![1, 2, 0, 1, 0, 2],
            vec![2, 2, 0, 1, 0, 2],
            vec![0, 0, 1, 1, 0, 2],
            vec![1, 0, 1, 1, 0, 2],
            vec![2, 0, 1, 1, 0, 2],
            vec![0, 1, 1, 1, 0, 2],
            vec![1, 1, 1, 1, 0, 2],
            vec![2, 1, 1, 1, 0, 2],
            vec![0, 2, 1, 1, 0, 2],
            vec![1, 2, 1, 1, 0, 2],
            vec![2, 2, 1, 1, 0, 2],
            vec![0, 0, 2, 1, 0, 2],
            vec![1, 0, 2, 1, 0, 2],
            vec![2, 0, 2, 1, 0, 2],
            vec![0, 1, 2, 1, 0, 2],
            vec![1, 1, 2, 1, 0, 2],
            vec![2, 1, 2, 1, 0, 2],
            vec![0, 2, 2, 1, 0, 2],
            vec![1, 2, 2, 1, 0, 2],
            vec![2, 2, 2, 1, 0, 2],
            vec![0, 0, 0, 2, 0, 2],
            vec![1, 0, 0, 2, 0, 2],
            vec![2, 0, 0, 2, 0, 2],
            vec![0, 1, 0, 2, 0, 2],
            vec![1, 1, 0, 2, 0, 2],
            vec![2, 1, 0, 2, 0, 2],
            vec![0, 2, 0, 2, 0, 2],
            vec![1, 2, 0, 2, 0, 2],
            vec![2, 2, 0, 2, 0, 2],
            vec![0, 0, 1, 2, 0, 2],
            vec![1, 0, 1, 2, 0, 2],
            vec![2, 0, 1, 2, 0, 2],
            vec![0, 1, 1, 2, 0, 2],
            vec![1, 1, 1, 2, 0, 2],
            vec![2, 1, 1, 2, 0, 2],
            vec![0, 2, 1, 2, 0, 2],
            vec![1, 2, 1, 2, 0, 2],
            vec![2, 2, 1, 2, 0, 2],
            vec![0, 0, 2, 2, 0, 2],
            vec![1, 0, 2, 2, 0, 2],
            vec![2, 0, 2, 2, 0, 2],
            vec![0, 1, 2, 2, 0, 2],
            vec![1, 1, 2, 2, 0, 2],
            vec![2, 1, 2, 2, 0, 2],
            vec![0, 2, 2, 2, 0, 2],
            vec![1, 2, 2, 2, 0, 2],
            vec![2, 2, 2, 2, 0, 2],
            vec![0, 0, 0, 0, 1, 2],
            vec![1, 0, 0, 0, 1, 2],
            vec![2, 0, 0, 0, 1, 2],
            vec![0, 1, 0, 0, 1, 2],
            vec![1, 1, 0, 0, 1, 2],
            vec![2, 1, 0, 0, 1, 2],
            vec![0, 2, 0, 0, 1, 2],
            vec![1, 2, 0, 0, 1, 2],
            vec![2, 2, 0, 0, 1, 2],
            vec![0, 0, 1, 0, 1, 2],
            vec![1, 0, 1, 0, 1, 2],
            vec![2, 0, 1, 0, 1, 2],
            vec![0, 1, 1, 0, 1, 2],
            vec![1, 1, 1, 0, 1, 2],
            vec![2, 1, 1, 0, 1, 2],
            vec![0, 2, 1, 0, 1, 2],
            vec![1, 2, 1, 0, 1, 2],
            vec![2, 2, 1, 0, 1, 2],
            vec![0, 0, 2, 0, 1, 2],
            vec![1, 0, 2, 0, 1, 2],
            vec![2, 0, 2, 0, 1, 2],
            vec![0, 1, 2, 0, 1, 2],
            vec![1, 1, 2, 0, 1, 2],
            vec![2, 1, 2, 0, 1, 2],
            vec![0, 2, 2, 0, 1, 2],
            vec![1, 2, 2, 0, 1, 2],
            vec![2, 2, 2, 0, 1, 2],
            vec![0, 0, 0, 1, 1, 2],
            vec![1, 0, 0, 1, 1, 2],
            vec![2, 0, 0, 1, 1, 2],
            vec![0, 1, 0, 1, 1, 2],
            vec![1, 1, 0, 1, 1, 2],
            vec![2, 1, 0, 1, 1, 2],
            vec![0, 2, 0, 1, 1, 2],
            vec![1, 2, 0, 1, 1, 2],
            vec![2, 2, 0, 1, 1, 2],
            vec![0, 0, 1, 1, 1, 2],
            vec![1, 0, 1, 1, 1, 2],
            vec![2, 0, 1, 1, 1, 2],
            vec![0, 1, 1, 1, 1, 2],
            vec![1, 1, 1, 1, 1, 2],
            vec![2, 1, 1, 1, 1, 2],
            vec![0, 2, 1, 1, 1, 2],
            vec![1, 2, 1, 1, 1, 2],
            vec![2, 2, 1, 1, 1, 2],
            vec![0, 0, 2, 1, 1, 2],
            vec![1, 0, 2, 1, 1, 2],
            vec![2, 0, 2, 1, 1, 2],
            vec![0, 1, 2, 1, 1, 2],
            vec![1, 1, 2, 1, 1, 2],
            vec![2, 1, 2, 1, 1, 2],
            vec![0, 2, 2, 1, 1, 2],
            vec![1, 2, 2, 1, 1, 2],
            vec![2, 2, 2, 1, 1, 2],
            vec![0, 0, 0, 2, 1, 2],
            vec![1, 0, 0, 2, 1, 2],
            vec![2, 0, 0, 2, 1, 2],
            vec![0, 1, 0, 2, 1, 2],
            vec![1, 1, 0, 2, 1, 2],
            vec![2, 1, 0, 2, 1, 2],
            vec![0, 2, 0, 2, 1, 2],
            vec![1, 2, 0, 2, 1, 2],
            vec![2, 2, 0, 2, 1, 2],
            vec![0, 0, 1, 2, 1, 2],
            vec![1, 0, 1, 2, 1, 2],
            vec![2, 0, 1, 2, 1, 2],
            vec![0, 1, 1, 2, 1, 2],
            vec![1, 1, 1, 2, 1, 2],
            vec![2, 1, 1, 2, 1, 2],
            vec![0, 2, 1, 2, 1, 2],
            vec![1, 2, 1, 2, 1, 2],
            vec![2, 2, 1, 2, 1, 2],
            vec![0, 0, 2, 2, 1, 2],
            vec![1, 0, 2, 2, 1, 2],
            vec![2, 0, 2, 2, 1, 2],
            vec![0, 1, 2, 2, 1, 2],
            vec![1, 1, 2, 2, 1, 2],
            vec![2, 1, 2, 2, 1, 2],
            vec![0, 2, 2, 2, 1, 2],
            vec![1, 2, 2, 2, 1, 2],
            vec![2, 2, 2, 2, 1, 2],
            vec![0, 0, 0, 0, 2, 2],
            vec![1, 0, 0, 0, 2, 2],
            vec![2, 0, 0, 0, 2, 2],
            vec![0, 1, 0, 0, 2, 2],
            vec![1, 1, 0, 0, 2, 2],
            vec![2, 1, 0, 0, 2, 2],
            vec![0, 2, 0, 0, 2, 2],
            vec![1, 2, 0, 0, 2, 2],
            vec![2, 2, 0, 0, 2, 2],
            vec![0, 0, 1, 0, 2, 2],
            vec![1, 0, 1, 0, 2, 2],
            vec![2, 0, 1, 0, 2, 2],
            vec![0, 1, 1, 0, 2, 2],
            vec![1, 1, 1, 0, 2, 2],
            vec![2, 1, 1, 0, 2, 2],
            vec![0, 2, 1, 0, 2, 2],
            vec![1, 2, 1, 0, 2, 2],
            vec![2, 2, 1, 0, 2, 2],
            vec![0, 0, 2, 0, 2, 2],
            vec![1, 0, 2, 0, 2, 2],
            vec![2, 0, 2, 0, 2, 2],
            vec![0, 1, 2, 0, 2, 2],
            vec![1, 1, 2, 0, 2, 2],
            vec![2, 1, 2, 0, 2, 2],
            vec![0, 2, 2, 0, 2, 2],
            vec![1, 2, 2, 0, 2, 2],
            vec![2, 2, 2, 0, 2, 2],
            vec![0, 0, 0, 1, 2, 2],
            vec![1, 0, 0, 1, 2, 2],
            vec![2, 0, 0, 1, 2, 2],
            vec![0, 1, 0, 1, 2, 2],
            vec![1, 1, 0, 1, 2, 2],
            vec![2, 1, 0, 1, 2, 2],
            vec![0, 2, 0, 1, 2, 2],
            vec![1, 2, 0, 1, 2, 2],
            vec![2, 2, 0, 1, 2, 2],
            vec![0, 0, 1, 1, 2, 2],
            vec![1, 0, 1, 1, 2, 2],
            vec![2, 0, 1, 1, 2, 2],
            vec![0, 1, 1, 1, 2, 2],
            vec![1, 1, 1, 1, 2, 2],
            vec![2, 1, 1, 1, 2, 2],
            vec![0, 2, 1, 1, 2, 2],
            vec![1, 2, 1, 1, 2, 2],
            vec![2, 2, 1, 1, 2, 2],
            vec![0, 0, 2, 1, 2, 2],
            vec![1, 0, 2, 1, 2, 2],
            vec![2, 0, 2, 1, 2, 2],
            vec![0, 1, 2, 1, 2, 2],
            vec![1, 1, 2, 1, 2, 2],
            vec![2, 1, 2, 1, 2, 2],
            vec![0, 2, 2, 1, 2, 2],
            vec![1, 2, 2, 1, 2, 2],
            vec![2, 2, 2, 1, 2, 2],
            vec![0, 0, 0, 2, 2, 2],
            vec![1, 0, 0, 2, 2, 2],
            vec![2, 0, 0, 2, 2, 2],
            vec![0, 1, 0, 2, 2, 2],
            vec![1, 1, 0, 2, 2, 2],
            vec![2, 1, 0, 2, 2, 2],
            vec![0, 2, 0, 2, 2, 2],
            vec![1, 2, 0, 2, 2, 2],
            vec![2, 2, 0, 2, 2, 2],
            vec![0, 0, 1, 2, 2, 2],
            vec![1, 0, 1, 2, 2, 2],
            vec![2, 0, 1, 2, 2, 2],
            vec![0, 1, 1, 2, 2, 2],
            vec![1, 1, 1, 2, 2, 2],
            vec![2, 1, 1, 2, 2, 2],
            vec![0, 2, 1, 2, 2, 2],
            vec![1, 2, 1, 2, 2, 2],
            vec![2, 2, 1, 2, 2, 2],
            vec![0, 0, 2, 2, 2, 2],
            vec![1, 0, 2, 2, 2, 2],
            vec![2, 0, 2, 2, 2, 2],
            vec![0, 1, 2, 2, 2, 2],
            vec![1, 1, 2, 2, 2, 2],
            vec![2, 1, 2, 2, 2, 2],
            vec![0, 2, 2, 2, 2, 2],
            vec![1, 2, 2, 2, 2, 2],
            vec![2, 2, 2, 2, 2, 2],
        ]);
        assert_eq!(
            expected,
            actual,
            "missing {:?}",
            // expected.difference(&actual)
            actual.difference(&expected)
        );
    }
}
