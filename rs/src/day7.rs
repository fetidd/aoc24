use std::collections::HashSet;

use aoc24::utils;

fn main() {
    let input = include_str!("../../puzzle_input/day7.txt");
    let result = process(&input);
    println!("{}", result);
}

fn process(input: &str) -> String {
    let mut total = 0;
    'line_loop: for line in input.lines() {
        let mut s = line.split(':');
        let test_value: i64 = s.next().unwrap().parse().unwrap();
        let equation: Vec<i64> = utils::parse_space_list(&s.collect::<String>()).unwrap();
        let reducer_length = equation
            .iter()
            .reduce(|a, b| if b > a { b } else { a })
            .unwrap()
            - 1;
        let reducers = create_reducers(reducer_length as usize);
        for reducer in create_reducers(equation.len()) {
            if equation
                .iter()
                .cloned()
                .enumerate()
                .reduce(|(_, acc), (new_i, new)| do_reduce(&reducer, acc, new, new_i))
                .map(|(_, n)| n)
                .unwrap()
                == test_value
            {
                total += test_value;
                continue 'line_loop;
            }
        }
    }
    total.to_string()
}

fn create_reducers(num: usize) -> HashSet<Vec<u8>> {
    let mut reducers = vec![vec![0], vec![1], vec![2]];
    for _ in 1..num {
        for v in 0..reducers.len() {
            reducers[v].push(0);
        }
        let mut extra = reducers.clone();
        for e in 0..extra.len() {
            *extra[e].last_mut().unwrap() = 1;
        }
        reducers.extend(extra);
        let mut extra = reducers.clone();
        for e in 0..extra.len() {
            *extra[e].last_mut().unwrap() = 2;
        }
        reducers.extend(extra);
    }
    HashSet::from_iter(reducers)
}

fn do_reduce(reducer: &Vec<u8>, acc: i64, new: i64, new_i: usize) -> (usize, i64) {
    match reducer[new_i] {
        0 => (new_i, acc + new),
        1 => (new_i, acc * new),
        2 => (new_i, (acc.to_string() + &new.to_string()).parse().unwrap()),
        _ => panic!("invalid reducer function specified!"),
    }
}

#[cfg(test)]
mod tests {
    use std::collections::HashSet;

    use super::*;

    static EXAMPLE: &'static str = "190: 10 19\n\
                                    3267: 81 40 27\n\
                                    83: 17 5\n\
                                    156: 15 6\n\
                                    7290: 6 8 6 15\n\
                                    161011: 16 10 13\n\
                                    192: 17 8 14\n\
                                    21037: 9 7 18 13\n\
                                    292: 11 6 16 20";

    #[test]
    fn test_process() {
        assert_eq!("11387".to_string(), process(EXAMPLE));
    }

    #[test]
    fn create_reducer() {
        let actual = create_reducers(6);
        // let expected = Vec::from([
        let expected = HashSet::from([
            vec![0, 0, 0, 0, 0, 0],
            vec![1, 0, 0, 0, 0, 0],
            vec![2, 0, 0, 0, 0, 0],
            vec![0, 1, 0, 0, 0, 0],
            vec![1, 1, 0, 0, 0, 0],
            vec![2, 1, 0, 0, 0, 0],
            vec![0, 2, 0, 0, 0, 0],
            vec![1, 2, 0, 0, 0, 0],
            vec![2, 2, 0, 0, 0, 0],
            vec![0, 0, 1, 0, 0, 0],
            vec![1, 0, 1, 0, 0, 0],
            vec![2, 0, 1, 0, 0, 0],
            vec![0, 1, 1, 0, 0, 0],
            vec![1, 1, 1, 0, 0, 0],
            vec![2, 1, 1, 0, 0, 0],
            vec![0, 2, 1, 0, 0, 0],
            vec![1, 2, 1, 0, 0, 0],
            vec![2, 2, 1, 0, 0, 0],
            vec![0, 0, 2, 0, 0, 0],
            vec![1, 0, 2, 0, 0, 0],
            vec![2, 0, 2, 0, 0, 0],
            vec![0, 1, 2, 0, 0, 0],
            vec![1, 1, 2, 0, 0, 0],
            vec![2, 1, 2, 0, 0, 0],
            vec![0, 2, 2, 0, 0, 0],
            vec![1, 2, 2, 0, 0, 0],
            vec![2, 2, 2, 0, 0, 0],
            vec![0, 0, 0, 1, 0, 0],
            vec![1, 0, 0, 1, 0, 0],
            vec![2, 0, 0, 1, 0, 0],
            vec![0, 1, 0, 1, 0, 0],
            vec![1, 1, 0, 1, 0, 0],
            vec![2, 1, 0, 1, 0, 0],
            vec![0, 2, 0, 1, 0, 0],
            vec![1, 2, 0, 1, 0, 0],
            vec![2, 2, 0, 1, 0, 0],
            vec![0, 0, 1, 1, 0, 0],
            vec![1, 0, 1, 1, 0, 0],
            vec![2, 0, 1, 1, 0, 0],
            vec![0, 1, 1, 1, 0, 0],
            vec![1, 1, 1, 1, 0, 0],
            vec![2, 1, 1, 1, 0, 0],
            vec![0, 2, 1, 1, 0, 0],
            vec![1, 2, 1, 1, 0, 0],
            vec![2, 2, 1, 1, 0, 0],
            vec![0, 0, 2, 1, 0, 0],
            vec![1, 0, 2, 1, 0, 0],
            vec![2, 0, 2, 1, 0, 0],
            vec![0, 1, 2, 1, 0, 0],
            vec![1, 1, 2, 1, 0, 0],
            vec![2, 1, 2, 1, 0, 0],
            vec![0, 2, 2, 1, 0, 0],
            vec![1, 2, 2, 1, 0, 0],
            vec![2, 2, 2, 1, 0, 0],
            vec![0, 0, 0, 2, 0, 0],
            vec![1, 0, 0, 2, 0, 0],
            vec![2, 0, 0, 2, 0, 0],
            vec![0, 1, 0, 2, 0, 0],
            vec![1, 1, 0, 2, 0, 0],
            vec![2, 1, 0, 2, 0, 0],
            vec![0, 2, 0, 2, 0, 0],
            vec![1, 2, 0, 2, 0, 0],
            vec![2, 2, 0, 2, 0, 0],
            vec![0, 0, 1, 2, 0, 0],
            vec![1, 0, 1, 2, 0, 0],
            vec![2, 0, 1, 2, 0, 0],
            vec![0, 1, 1, 2, 0, 0],
            vec![1, 1, 1, 2, 0, 0],
            vec![2, 1, 1, 2, 0, 0],
            vec![0, 2, 1, 2, 0, 0],
            vec![1, 2, 1, 2, 0, 0],
            vec![2, 2, 1, 2, 0, 0],
            vec![0, 0, 2, 2, 0, 0],
            vec![1, 0, 2, 2, 0, 0],
            vec![2, 0, 2, 2, 0, 0],
            vec![0, 1, 2, 2, 0, 0],
            vec![1, 1, 2, 2, 0, 0],
            vec![2, 1, 2, 2, 0, 0],
            vec![0, 2, 2, 2, 0, 0],
            vec![1, 2, 2, 2, 0, 0],
            vec![2, 2, 2, 2, 0, 0],
            vec![0, 0, 0, 0, 1, 0],
            vec![1, 0, 0, 0, 1, 0],
            vec![2, 0, 0, 0, 1, 0],
            vec![0, 1, 0, 0, 1, 0],
            vec![1, 1, 0, 0, 1, 0],
            vec![2, 1, 0, 0, 1, 0],
            vec![0, 2, 0, 0, 1, 0],
            vec![1, 2, 0, 0, 1, 0],
            vec![2, 2, 0, 0, 1, 0],
            vec![0, 0, 1, 0, 1, 0],
            vec![1, 0, 1, 0, 1, 0],
            vec![2, 0, 1, 0, 1, 0],
            vec![0, 1, 1, 0, 1, 0],
            vec![1, 1, 1, 0, 1, 0],
            vec![2, 1, 1, 0, 1, 0],
            vec![0, 2, 1, 0, 1, 0],
            vec![1, 2, 1, 0, 1, 0],
            vec![2, 2, 1, 0, 1, 0],
            vec![0, 0, 2, 0, 1, 0],
            vec![1, 0, 2, 0, 1, 0],
            vec![2, 0, 2, 0, 1, 0],
            vec![0, 1, 2, 0, 1, 0],
            vec![1, 1, 2, 0, 1, 0],
            vec![2, 1, 2, 0, 1, 0],
            vec![0, 2, 2, 0, 1, 0],
            vec![1, 2, 2, 0, 1, 0],
            vec![2, 2, 2, 0, 1, 0],
            vec![0, 0, 0, 1, 1, 0],
            vec![1, 0, 0, 1, 1, 0],
            vec![2, 0, 0, 1, 1, 0],
            vec![0, 1, 0, 1, 1, 0],
            vec![1, 1, 0, 1, 1, 0],
            vec![2, 1, 0, 1, 1, 0],
            vec![0, 2, 0, 1, 1, 0],
            vec![1, 2, 0, 1, 1, 0],
            vec![2, 2, 0, 1, 1, 0],
            vec![0, 0, 1, 1, 1, 0],
            vec![1, 0, 1, 1, 1, 0],
            vec![2, 0, 1, 1, 1, 0],
            vec![0, 1, 1, 1, 1, 0],
            vec![1, 1, 1, 1, 1, 0],
            vec![2, 1, 1, 1, 1, 0],
            vec![0, 2, 1, 1, 1, 0],
            vec![1, 2, 1, 1, 1, 0],
            vec![2, 2, 1, 1, 1, 0],
            vec![0, 0, 2, 1, 1, 0],
            vec![1, 0, 2, 1, 1, 0],
            vec![2, 0, 2, 1, 1, 0],
            vec![0, 1, 2, 1, 1, 0],
            vec![1, 1, 2, 1, 1, 0],
            vec![2, 1, 2, 1, 1, 0],
            vec![0, 2, 2, 1, 1, 0],
            vec![1, 2, 2, 1, 1, 0],
            vec![2, 2, 2, 1, 1, 0],
            vec![0, 0, 0, 2, 1, 0],
            vec![1, 0, 0, 2, 1, 0],
            vec![2, 0, 0, 2, 1, 0],
            vec![0, 1, 0, 2, 1, 0],
            vec![1, 1, 0, 2, 1, 0],
            vec![2, 1, 0, 2, 1, 0],
            vec![0, 2, 0, 2, 1, 0],
            vec![1, 2, 0, 2, 1, 0],
            vec![2, 2, 0, 2, 1, 0],
            vec![0, 0, 1, 2, 1, 0],
            vec![1, 0, 1, 2, 1, 0],
            vec![2, 0, 1, 2, 1, 0],
            vec![0, 1, 1, 2, 1, 0],
            vec![1, 1, 1, 2, 1, 0],
            vec![2, 1, 1, 2, 1, 0],
            vec![0, 2, 1, 2, 1, 0],
            vec![1, 2, 1, 2, 1, 0],
            vec![2, 2, 1, 2, 1, 0],
            vec![0, 0, 2, 2, 1, 0],
            vec![1, 0, 2, 2, 1, 0],
            vec![2, 0, 2, 2, 1, 0],
            vec![0, 1, 2, 2, 1, 0],
            vec![1, 1, 2, 2, 1, 0],
            vec![2, 1, 2, 2, 1, 0],
            vec![0, 2, 2, 2, 1, 0],
            vec![1, 2, 2, 2, 1, 0],
            vec![2, 2, 2, 2, 1, 0],
            vec![0, 0, 0, 0, 2, 0],
            vec![1, 0, 0, 0, 2, 0],
            vec![2, 0, 0, 0, 2, 0],
            vec![0, 1, 0, 0, 2, 0],
            vec![1, 1, 0, 0, 2, 0],
            vec![2, 1, 0, 0, 2, 0],
            vec![0, 2, 0, 0, 2, 0],
            vec![1, 2, 0, 0, 2, 0],
            vec![2, 2, 0, 0, 2, 0],
            vec![0, 0, 1, 0, 2, 0],
            vec![1, 0, 1, 0, 2, 0],
            vec![2, 0, 1, 0, 2, 0],
            vec![0, 1, 1, 0, 2, 0],
            vec![1, 1, 1, 0, 2, 0],
            vec![2, 1, 1, 0, 2, 0],
            vec![0, 2, 1, 0, 2, 0],
            vec![1, 2, 1, 0, 2, 0],
            vec![2, 2, 1, 0, 2, 0],
            vec![0, 0, 2, 0, 2, 0],
            vec![1, 0, 2, 0, 2, 0],
            vec![2, 0, 2, 0, 2, 0],
            vec![0, 1, 2, 0, 2, 0],
            vec![1, 1, 2, 0, 2, 0],
            vec![2, 1, 2, 0, 2, 0],
            vec![0, 2, 2, 0, 2, 0],
            vec![1, 2, 2, 0, 2, 0],
            vec![2, 2, 2, 0, 2, 0],
            vec![0, 0, 0, 1, 2, 0],
            vec![1, 0, 0, 1, 2, 0],
            vec![2, 0, 0, 1, 2, 0],
            vec![0, 1, 0, 1, 2, 0],
            vec![1, 1, 0, 1, 2, 0],
            vec![2, 1, 0, 1, 2, 0],
            vec![0, 2, 0, 1, 2, 0],
            vec![1, 2, 0, 1, 2, 0],
            vec![2, 2, 0, 1, 2, 0],
            vec![0, 0, 1, 1, 2, 0],
            vec![1, 0, 1, 1, 2, 0],
            vec![2, 0, 1, 1, 2, 0],
            vec![0, 1, 1, 1, 2, 0],
            vec![1, 1, 1, 1, 2, 0],
            vec![2, 1, 1, 1, 2, 0],
            vec![0, 2, 1, 1, 2, 0],
            vec![1, 2, 1, 1, 2, 0],
            vec![2, 2, 1, 1, 2, 0],
            vec![0, 0, 2, 1, 2, 0],
            vec![1, 0, 2, 1, 2, 0],
            vec![2, 0, 2, 1, 2, 0],
            vec![0, 1, 2, 1, 2, 0],
            vec![1, 1, 2, 1, 2, 0],
            vec![2, 1, 2, 1, 2, 0],
            vec![0, 2, 2, 1, 2, 0],
            vec![1, 2, 2, 1, 2, 0],
            vec![2, 2, 2, 1, 2, 0],
            vec![0, 0, 0, 2, 2, 0],
            vec![1, 0, 0, 2, 2, 0],
            vec![2, 0, 0, 2, 2, 0],
            vec![0, 1, 0, 2, 2, 0],
            vec![1, 1, 0, 2, 2, 0],
            vec![2, 1, 0, 2, 2, 0],
            vec![0, 2, 0, 2, 2, 0],
            vec![1, 2, 0, 2, 2, 0],
            vec![2, 2, 0, 2, 2, 0],
            vec![0, 0, 1, 2, 2, 0],
            vec![1, 0, 1, 2, 2, 0],
            vec![2, 0, 1, 2, 2, 0],
            vec![0, 1, 1, 2, 2, 0],
            vec![1, 1, 1, 2, 2, 0],
            vec![2, 1, 1, 2, 2, 0],
            vec![0, 2, 1, 2, 2, 0],
            vec![1, 2, 1, 2, 2, 0],
            vec![2, 2, 1, 2, 2, 0],
            vec![0, 0, 2, 2, 2, 0],
            vec![1, 0, 2, 2, 2, 0],
            vec![2, 0, 2, 2, 2, 0],
            vec![0, 1, 2, 2, 2, 0],
            vec![1, 1, 2, 2, 2, 0],
            vec![2, 1, 2, 2, 2, 0],
            vec![0, 2, 2, 2, 2, 0],
            vec![1, 2, 2, 2, 2, 0],
            vec![2, 2, 2, 2, 2, 0],
            vec![0, 0, 0, 0, 0, 1],
            vec![1, 0, 0, 0, 0, 1],
            vec![2, 0, 0, 0, 0, 1],
            vec![0, 1, 0, 0, 0, 1],
            vec![1, 1, 0, 0, 0, 1],
            vec![2, 1, 0, 0, 0, 1],
            vec![0, 2, 0, 0, 0, 1],
            vec![1, 2, 0, 0, 0, 1],
            vec![2, 2, 0, 0, 0, 1],
            vec![0, 0, 1, 0, 0, 1],
            vec![1, 0, 1, 0, 0, 1],
            vec![2, 0, 1, 0, 0, 1],
            vec![0, 1, 1, 0, 0, 1],
            vec![1, 1, 1, 0, 0, 1],
            vec![2, 1, 1, 0, 0, 1],
            vec![0, 2, 1, 0, 0, 1],
            vec![1, 2, 1, 0, 0, 1],
            vec![2, 2, 1, 0, 0, 1],
            vec![0, 0, 2, 0, 0, 1],
            vec![1, 0, 2, 0, 0, 1],
            vec![2, 0, 2, 0, 0, 1],
            vec![0, 1, 2, 0, 0, 1],
            vec![1, 1, 2, 0, 0, 1],
            vec![2, 1, 2, 0, 0, 1],
            vec![0, 2, 2, 0, 0, 1],
            vec![1, 2, 2, 0, 0, 1],
            vec![2, 2, 2, 0, 0, 1],
            vec![0, 0, 0, 1, 0, 1],
            vec![1, 0, 0, 1, 0, 1],
            vec![2, 0, 0, 1, 0, 1],
            vec![0, 1, 0, 1, 0, 1],
            vec![1, 1, 0, 1, 0, 1],
            vec![2, 1, 0, 1, 0, 1],
            vec![0, 2, 0, 1, 0, 1],
            vec![1, 2, 0, 1, 0, 1],
            vec![2, 2, 0, 1, 0, 1],
            vec![0, 0, 1, 1, 0, 1],
            vec![1, 0, 1, 1, 0, 1],
            vec![2, 0, 1, 1, 0, 1],
            vec![0, 1, 1, 1, 0, 1],
            vec![1, 1, 1, 1, 0, 1],
            vec![2, 1, 1, 1, 0, 1],
            vec![0, 2, 1, 1, 0, 1],
            vec![1, 2, 1, 1, 0, 1],
            vec![2, 2, 1, 1, 0, 1],
            vec![0, 0, 2, 1, 0, 1],
            vec![1, 0, 2, 1, 0, 1],
            vec![2, 0, 2, 1, 0, 1],
            vec![0, 1, 2, 1, 0, 1],
            vec![1, 1, 2, 1, 0, 1],
            vec![2, 1, 2, 1, 0, 1],
            vec![0, 2, 2, 1, 0, 1],
            vec![1, 2, 2, 1, 0, 1],
            vec![2, 2, 2, 1, 0, 1],
            vec![0, 0, 0, 2, 0, 1],
            vec![1, 0, 0, 2, 0, 1],
            vec![2, 0, 0, 2, 0, 1],
            vec![0, 1, 0, 2, 0, 1],
            vec![1, 1, 0, 2, 0, 1],
            vec![2, 1, 0, 2, 0, 1],
            vec![0, 2, 0, 2, 0, 1],
            vec![1, 2, 0, 2, 0, 1],
            vec![2, 2, 0, 2, 0, 1],
            vec![0, 0, 1, 2, 0, 1],
            vec![1, 0, 1, 2, 0, 1],
            vec![2, 0, 1, 2, 0, 1],
            vec![0, 1, 1, 2, 0, 1],
            vec![1, 1, 1, 2, 0, 1],
            vec![2, 1, 1, 2, 0, 1],
            vec![0, 2, 1, 2, 0, 1],
            vec![1, 2, 1, 2, 0, 1],
            vec![2, 2, 1, 2, 0, 1],
            vec![0, 0, 2, 2, 0, 1],
            vec![1, 0, 2, 2, 0, 1],
            vec![2, 0, 2, 2, 0, 1],
            vec![0, 1, 2, 2, 0, 1],
            vec![1, 1, 2, 2, 0, 1],
            vec![2, 1, 2, 2, 0, 1],
            vec![0, 2, 2, 2, 0, 1],
            vec![1, 2, 2, 2, 0, 1],
            vec![2, 2, 2, 2, 0, 1],
            vec![0, 0, 0, 0, 1, 1],
            vec![1, 0, 0, 0, 1, 1],
            vec![2, 0, 0, 0, 1, 1],
            vec![0, 1, 0, 0, 1, 1],
            vec![1, 1, 0, 0, 1, 1],
            vec![2, 1, 0, 0, 1, 1],
            vec![0, 2, 0, 0, 1, 1],
            vec![1, 2, 0, 0, 1, 1],
            vec![2, 2, 0, 0, 1, 1],
            vec![0, 0, 1, 0, 1, 1],
            vec![1, 0, 1, 0, 1, 1],
            vec![2, 0, 1, 0, 1, 1],
            vec![0, 1, 1, 0, 1, 1],
            vec![1, 1, 1, 0, 1, 1],
            vec![2, 1, 1, 0, 1, 1],
            vec![0, 2, 1, 0, 1, 1],
            vec![1, 2, 1, 0, 1, 1],
            vec![2, 2, 1, 0, 1, 1],
            vec![0, 0, 2, 0, 1, 1],
            vec![1, 0, 2, 0, 1, 1],
            vec![2, 0, 2, 0, 1, 1],
            vec![0, 1, 2, 0, 1, 1],
            vec![1, 1, 2, 0, 1, 1],
            vec![2, 1, 2, 0, 1, 1],
            vec![0, 2, 2, 0, 1, 1],
            vec![1, 2, 2, 0, 1, 1],
            vec![2, 2, 2, 0, 1, 1],
            vec![0, 0, 0, 1, 1, 1],
            vec![1, 0, 0, 1, 1, 1],
            vec![2, 0, 0, 1, 1, 1],
            vec![0, 1, 0, 1, 1, 1],
            vec![1, 1, 0, 1, 1, 1],
            vec![2, 1, 0, 1, 1, 1],
            vec![0, 2, 0, 1, 1, 1],
            vec![1, 2, 0, 1, 1, 1],
            vec![2, 2, 0, 1, 1, 1],
            vec![0, 0, 1, 1, 1, 1],
            vec![1, 0, 1, 1, 1, 1],
            vec![2, 0, 1, 1, 1, 1],
            vec![0, 1, 1, 1, 1, 1],
            vec![1, 1, 1, 1, 1, 1],
            vec![2, 1, 1, 1, 1, 1],
            vec![0, 2, 1, 1, 1, 1],
            vec![1, 2, 1, 1, 1, 1],
            vec![2, 2, 1, 1, 1, 1],
            vec![0, 0, 2, 1, 1, 1],
            vec![1, 0, 2, 1, 1, 1],
            vec![2, 0, 2, 1, 1, 1],
            vec![0, 1, 2, 1, 1, 1],
            vec![1, 1, 2, 1, 1, 1],
            vec![2, 1, 2, 1, 1, 1],
            vec![0, 2, 2, 1, 1, 1],
            vec![1, 2, 2, 1, 1, 1],
            vec![2, 2, 2, 1, 1, 1],
            vec![0, 0, 0, 2, 1, 1],
            vec![1, 0, 0, 2, 1, 1],
            vec![2, 0, 0, 2, 1, 1],
            vec![0, 1, 0, 2, 1, 1],
            vec![1, 1, 0, 2, 1, 1],
            vec![2, 1, 0, 2, 1, 1],
            vec![0, 2, 0, 2, 1, 1],
            vec![1, 2, 0, 2, 1, 1],
            vec![2, 2, 0, 2, 1, 1],
            vec![0, 0, 1, 2, 1, 1],
            vec![1, 0, 1, 2, 1, 1],
            vec![2, 0, 1, 2, 1, 1],
            vec![0, 1, 1, 2, 1, 1],
            vec![1, 1, 1, 2, 1, 1],
            vec![2, 1, 1, 2, 1, 1],
            vec![0, 2, 1, 2, 1, 1],
            vec![1, 2, 1, 2, 1, 1],
            vec![2, 2, 1, 2, 1, 1],
            vec![0, 0, 2, 2, 1, 1],
            vec![1, 0, 2, 2, 1, 1],
            vec![2, 0, 2, 2, 1, 1],
            vec![0, 1, 2, 2, 1, 1],
            vec![1, 1, 2, 2, 1, 1],
            vec![2, 1, 2, 2, 1, 1],
            vec![0, 2, 2, 2, 1, 1],
            vec![1, 2, 2, 2, 1, 1],
            vec![2, 2, 2, 2, 1, 1],
            vec![0, 0, 0, 0, 2, 1],
            vec![1, 0, 0, 0, 2, 1],
            vec![2, 0, 0, 0, 2, 1],
            vec![0, 1, 0, 0, 2, 1],
            vec![1, 1, 0, 0, 2, 1],
            vec![2, 1, 0, 0, 2, 1],
            vec![0, 2, 0, 0, 2, 1],
            vec![1, 2, 0, 0, 2, 1],
            vec![2, 2, 0, 0, 2, 1],
            vec![0, 0, 1, 0, 2, 1],
            vec![1, 0, 1, 0, 2, 1],
            vec![2, 0, 1, 0, 2, 1],
            vec![0, 1, 1, 0, 2, 1],
            vec![1, 1, 1, 0, 2, 1],
            vec![2, 1, 1, 0, 2, 1],
            vec![0, 2, 1, 0, 2, 1],
            vec![1, 2, 1, 0, 2, 1],
            vec![2, 2, 1, 0, 2, 1],
            vec![0, 0, 2, 0, 2, 1],
            vec![1, 0, 2, 0, 2, 1],
            vec![2, 0, 2, 0, 2, 1],
            vec![0, 1, 2, 0, 2, 1],
            vec![1, 1, 2, 0, 2, 1],
            vec![2, 1, 2, 0, 2, 1],
            vec![0, 2, 2, 0, 2, 1],
            vec![1, 2, 2, 0, 2, 1],
            vec![2, 2, 2, 0, 2, 1],
            vec![0, 0, 0, 1, 2, 1],
            vec![1, 0, 0, 1, 2, 1],
            vec![2, 0, 0, 1, 2, 1],
            vec![0, 1, 0, 1, 2, 1],
            vec![1, 1, 0, 1, 2, 1],
            vec![2, 1, 0, 1, 2, 1],
            vec![0, 2, 0, 1, 2, 1],
            vec![1, 2, 0, 1, 2, 1],
            vec![2, 2, 0, 1, 2, 1],
            vec![0, 0, 1, 1, 2, 1],
            vec![1, 0, 1, 1, 2, 1],
            vec![2, 0, 1, 1, 2, 1],
            vec![0, 1, 1, 1, 2, 1],
            vec![1, 1, 1, 1, 2, 1],
            vec![2, 1, 1, 1, 2, 1],
            vec![0, 2, 1, 1, 2, 1],
            vec![1, 2, 1, 1, 2, 1],
            vec![2, 2, 1, 1, 2, 1],
            vec![0, 0, 2, 1, 2, 1],
            vec![1, 0, 2, 1, 2, 1],
            vec![2, 0, 2, 1, 2, 1],
            vec![0, 1, 2, 1, 2, 1],
            vec![1, 1, 2, 1, 2, 1],
            vec![2, 1, 2, 1, 2, 1],
            vec![0, 2, 2, 1, 2, 1],
            vec![1, 2, 2, 1, 2, 1],
            vec![2, 2, 2, 1, 2, 1],
            vec![0, 0, 0, 2, 2, 1],
            vec![1, 0, 0, 2, 2, 1],
            vec![2, 0, 0, 2, 2, 1],
            vec![0, 1, 0, 2, 2, 1],
            vec![1, 1, 0, 2, 2, 1],
            vec![2, 1, 0, 2, 2, 1],
            vec![0, 2, 0, 2, 2, 1],
            vec![1, 2, 0, 2, 2, 1],
            vec![2, 2, 0, 2, 2, 1],
            vec![0, 0, 1, 2, 2, 1],
            vec![1, 0, 1, 2, 2, 1],
            vec![2, 0, 1, 2, 2, 1],
            vec![0, 1, 1, 2, 2, 1],
            vec![1, 1, 1, 2, 2, 1],
            vec![2, 1, 1, 2, 2, 1],
            vec![0, 2, 1, 2, 2, 1],
            vec![1, 2, 1, 2, 2, 1],
            vec![2, 2, 1, 2, 2, 1],
            vec![0, 0, 2, 2, 2, 1],
            vec![1, 0, 2, 2, 2, 1],
            vec![2, 0, 2, 2, 2, 1],
            vec![0, 1, 2, 2, 2, 1],
            vec![1, 1, 2, 2, 2, 1],
            vec![2, 1, 2, 2, 2, 1],
            vec![0, 2, 2, 2, 2, 1],
            vec![1, 2, 2, 2, 2, 1],
            vec![2, 2, 2, 2, 2, 1],
            vec![0, 0, 0, 0, 0, 2],
            vec![1, 0, 0, 0, 0, 2],
            vec![2, 0, 0, 0, 0, 2],
            vec![0, 1, 0, 0, 0, 2],
            vec![1, 1, 0, 0, 0, 2],
            vec![2, 1, 0, 0, 0, 2],
            vec![0, 2, 0, 0, 0, 2],
            vec![1, 2, 0, 0, 0, 2],
            vec![2, 2, 0, 0, 0, 2],
            vec![0, 0, 1, 0, 0, 2],
            vec![1, 0, 1, 0, 0, 2],
            vec![2, 0, 1, 0, 0, 2],
            vec![0, 1, 1, 0, 0, 2],
            vec![1, 1, 1, 0, 0, 2],
            vec![2, 1, 1, 0, 0, 2],
            vec![0, 2, 1, 0, 0, 2],
            vec![1, 2, 1, 0, 0, 2],
            vec![2, 2, 1, 0, 0, 2],
            vec![0, 0, 2, 0, 0, 2],
            vec![1, 0, 2, 0, 0, 2],
            vec![2, 0, 2, 0, 0, 2],
            vec![0, 1, 2, 0, 0, 2],
            vec![1, 1, 2, 0, 0, 2],
            vec![2, 1, 2, 0, 0, 2],
            vec![0, 2, 2, 0, 0, 2],
            vec![1, 2, 2, 0, 0, 2],
            vec![2, 2, 2, 0, 0, 2],
            vec![0, 0, 0, 1, 0, 2],
            vec![1, 0, 0, 1, 0, 2],
            vec![2, 0, 0, 1, 0, 2],
            vec![0, 1, 0, 1, 0, 2],
            vec![1, 1, 0, 1, 0, 2],
            vec![2, 1, 0, 1, 0, 2],
            vec![0, 2, 0, 1, 0, 2],
            vec![1, 2, 0, 1, 0, 2],
            vec![2, 2, 0, 1, 0, 2],
            vec![0, 0, 1, 1, 0, 2],
            vec![1, 0, 1, 1, 0, 2],
            vec![2, 0, 1, 1, 0, 2],
            vec![0, 1, 1, 1, 0, 2],
            vec![1, 1, 1, 1, 0, 2],
            vec![2, 1, 1, 1, 0, 2],
            vec![0, 2, 1, 1, 0, 2],
            vec![1, 2, 1, 1, 0, 2],
            vec![2, 2, 1, 1, 0, 2],
            vec![0, 0, 2, 1, 0, 2],
            vec![1, 0, 2, 1, 0, 2],
            vec![2, 0, 2, 1, 0, 2],
            vec![0, 1, 2, 1, 0, 2],
            vec![1, 1, 2, 1, 0, 2],
            vec![2, 1, 2, 1, 0, 2],
            vec![0, 2, 2, 1, 0, 2],
            vec![1, 2, 2, 1, 0, 2],
            vec![2, 2, 2, 1, 0, 2],
            vec![0, 0, 0, 2, 0, 2],
            vec![1, 0, 0, 2, 0, 2],
            vec![2, 0, 0, 2, 0, 2],
            vec![0, 1, 0, 2, 0, 2],
            vec![1, 1, 0, 2, 0, 2],
            vec![2, 1, 0, 2, 0, 2],
            vec![0, 2, 0, 2, 0, 2],
            vec![1, 2, 0, 2, 0, 2],
            vec![2, 2, 0, 2, 0, 2],
            vec![0, 0, 1, 2, 0, 2],
            vec![1, 0, 1, 2, 0, 2],
            vec![2, 0, 1, 2, 0, 2],
            vec![0, 1, 1, 2, 0, 2],
            vec![1, 1, 1, 2, 0, 2],
            vec![2, 1, 1, 2, 0, 2],
            vec![0, 2, 1, 2, 0, 2],
            vec![1, 2, 1, 2, 0, 2],
            vec![2, 2, 1, 2, 0, 2],
            vec![0, 0, 2, 2, 0, 2],
            vec![1, 0, 2, 2, 0, 2],
            vec![2, 0, 2, 2, 0, 2],
            vec![0, 1, 2, 2, 0, 2],
            vec![1, 1, 2, 2, 0, 2],
            vec![2, 1, 2, 2, 0, 2],
            vec![0, 2, 2, 2, 0, 2],
            vec![1, 2, 2, 2, 0, 2],
            vec![2, 2, 2, 2, 0, 2],
            vec![0, 0, 0, 0, 1, 2],
            vec![1, 0, 0, 0, 1, 2],
            vec![2, 0, 0, 0, 1, 2],
            vec![0, 1, 0, 0, 1, 2],
            vec![1, 1, 0, 0, 1, 2],
            vec![2, 1, 0, 0, 1, 2],
            vec![0, 2, 0, 0, 1, 2],
            vec![1, 2, 0, 0, 1, 2],
            vec![2, 2, 0, 0, 1, 2],
            vec![0, 0, 1, 0, 1, 2],
            vec![1, 0, 1, 0, 1, 2],
            vec![2, 0, 1, 0, 1, 2],
            vec![0, 1, 1, 0, 1, 2],
            vec![1, 1, 1, 0, 1, 2],
            vec![2, 1, 1, 0, 1, 2],
            vec![0, 2, 1, 0, 1, 2],
            vec![1, 2, 1, 0, 1, 2],
            vec![2, 2, 1, 0, 1, 2],
            vec![0, 0, 2, 0, 1, 2],
            vec![1, 0, 2, 0, 1, 2],
            vec![2, 0, 2, 0, 1, 2],
            vec![0, 1, 2, 0, 1, 2],
            vec![1, 1, 2, 0, 1, 2],
            vec![2, 1, 2, 0, 1, 2],
            vec![0, 2, 2, 0, 1, 2],
            vec![1, 2, 2, 0, 1, 2],
            vec![2, 2, 2, 0, 1, 2],
            vec![0, 0, 0, 1, 1, 2],
            vec![1, 0, 0, 1, 1, 2],
            vec![2, 0, 0, 1, 1, 2],
            vec![0, 1, 0, 1, 1, 2],
            vec![1, 1, 0, 1, 1, 2],
            vec![2, 1, 0, 1, 1, 2],
            vec![0, 2, 0, 1, 1, 2],
            vec![1, 2, 0, 1, 1, 2],
            vec![2, 2, 0, 1, 1, 2],
            vec![0, 0, 1, 1, 1, 2],
            vec![1, 0, 1, 1, 1, 2],
            vec![2, 0, 1, 1, 1, 2],
            vec![0, 1, 1, 1, 1, 2],
            vec![1, 1, 1, 1, 1, 2],
            vec![2, 1, 1, 1, 1, 2],
            vec![0, 2, 1, 1, 1, 2],
            vec![1, 2, 1, 1, 1, 2],
            vec![2, 2, 1, 1, 1, 2],
            vec![0, 0, 2, 1, 1, 2],
            vec![1, 0, 2, 1, 1, 2],
            vec![2, 0, 2, 1, 1, 2],
            vec![0, 1, 2, 1, 1, 2],
            vec![1, 1, 2, 1, 1, 2],
            vec![2, 1, 2, 1, 1, 2],
            vec![0, 2, 2, 1, 1, 2],
            vec![1, 2, 2, 1, 1, 2],
            vec![2, 2, 2, 1, 1, 2],
            vec![0, 0, 0, 2, 1, 2],
            vec![1, 0, 0, 2, 1, 2],
            vec![2, 0, 0, 2, 1, 2],
            vec![0, 1, 0, 2, 1, 2],
            vec![1, 1, 0, 2, 1, 2],
            vec![2, 1, 0, 2, 1, 2],
            vec![0, 2, 0, 2, 1, 2],
            vec![1, 2, 0, 2, 1, 2],
            vec![2, 2, 0, 2, 1, 2],
            vec![0, 0, 1, 2, 1, 2],
            vec![1, 0, 1, 2, 1, 2],
            vec![2, 0, 1, 2, 1, 2],
            vec![0, 1, 1, 2, 1, 2],
            vec![1, 1, 1, 2, 1, 2],
            vec![2, 1, 1, 2, 1, 2],
            vec![0, 2, 1, 2, 1, 2],
            vec![1, 2, 1, 2, 1, 2],
            vec![2, 2, 1, 2, 1, 2],
            vec![0, 0, 2, 2, 1, 2],
            vec![1, 0, 2, 2, 1, 2],
            vec![2, 0, 2, 2, 1, 2],
            vec![0, 1, 2, 2, 1, 2],
            vec![1, 1, 2, 2, 1, 2],
            vec![2, 1, 2, 2, 1, 2],
            vec![0, 2, 2, 2, 1, 2],
            vec![1, 2, 2, 2, 1, 2],
            vec![2, 2, 2, 2, 1, 2],
            vec![0, 0, 0, 0, 2, 2],
            vec![1, 0, 0, 0, 2, 2],
            vec![2, 0, 0, 0, 2, 2],
            vec![0, 1, 0, 0, 2, 2],
            vec![1, 1, 0, 0, 2, 2],
            vec![2, 1, 0, 0, 2, 2],
            vec![0, 2, 0, 0, 2, 2],
            vec![1, 2, 0, 0, 2, 2],
            vec![2, 2, 0, 0, 2, 2],
            vec![0, 0, 1, 0, 2, 2],
            vec![1, 0, 1, 0, 2, 2],
            vec![2, 0, 1, 0, 2, 2],
            vec![0, 1, 1, 0, 2, 2],
            vec![1, 1, 1, 0, 2, 2],
            vec![2, 1, 1, 0, 2, 2],
            vec![0, 2, 1, 0, 2, 2],
            vec![1, 2, 1, 0, 2, 2],
            vec![2, 2, 1, 0, 2, 2],
            vec![0, 0, 2, 0, 2, 2],
            vec![1, 0, 2, 0, 2, 2],
            vec![2, 0, 2, 0, 2, 2],
            vec![0, 1, 2, 0, 2, 2],
            vec![1, 1, 2, 0, 2, 2],
            vec![2, 1, 2, 0, 2, 2],
            vec![0, 2, 2, 0, 2, 2],
            vec![1, 2, 2, 0, 2, 2],
            vec![2, 2, 2, 0, 2, 2],
            vec![0, 0, 0, 1, 2, 2],
            vec![1, 0, 0, 1, 2, 2],
            vec![2, 0, 0, 1, 2, 2],
            vec![0, 1, 0, 1, 2, 2],
            vec![1, 1, 0, 1, 2, 2],
            vec![2, 1, 0, 1, 2, 2],
            vec![0, 2, 0, 1, 2, 2],
            vec![1, 2, 0, 1, 2, 2],
            vec![2, 2, 0, 1, 2, 2],
            vec![0, 0, 1, 1, 2, 2],
            vec![1, 0, 1, 1, 2, 2],
            vec![2, 0, 1, 1, 2, 2],
            vec![0, 1, 1, 1, 2, 2],
            vec![1, 1, 1, 1, 2, 2],
            vec![2, 1, 1, 1, 2, 2],
            vec![0, 2, 1, 1, 2, 2],
            vec![1, 2, 1, 1, 2, 2],
            vec![2, 2, 1, 1, 2, 2],
            vec![0, 0, 2, 1, 2, 2],
            vec![1, 0, 2, 1, 2, 2],
            vec![2, 0, 2, 1, 2, 2],
            vec![0, 1, 2, 1, 2, 2],
            vec![1, 1, 2, 1, 2, 2],
            vec![2, 1, 2, 1, 2, 2],
            vec![0, 2, 2, 1, 2, 2],
            vec![1, 2, 2, 1, 2, 2],
            vec![2, 2, 2, 1, 2, 2],
            vec![0, 0, 0, 2, 2, 2],
            vec![1, 0, 0, 2, 2, 2],
            vec![2, 0, 0, 2, 2, 2],
            vec![0, 1, 0, 2, 2, 2],
            vec![1, 1, 0, 2, 2, 2],
            vec![2, 1, 0, 2, 2, 2],
            vec![0, 2, 0, 2, 2, 2],
            vec![1, 2, 0, 2, 2, 2],
            vec![2, 2, 0, 2, 2, 2],
            vec![0, 0, 1, 2, 2, 2],
            vec![1, 0, 1, 2, 2, 2],
            vec![2, 0, 1, 2, 2, 2],
            vec![0, 1, 1, 2, 2, 2],
            vec![1, 1, 1, 2, 2, 2],
            vec![2, 1, 1, 2, 2, 2],
            vec![0, 2, 1, 2, 2, 2],
            vec![1, 2, 1, 2, 2, 2],
            vec![2, 2, 1, 2, 2, 2],
            vec![0, 0, 2, 2, 2, 2],
            vec![1, 0, 2, 2, 2, 2],
            vec![2, 0, 2, 2, 2, 2],
            vec![0, 1, 2, 2, 2, 2],
            vec![1, 1, 2, 2, 2, 2],
            vec![2, 1, 2, 2, 2, 2],
            vec![0, 2, 2, 2, 2, 2],
            vec![1, 2, 2, 2, 2, 2],
            vec![2, 2, 2, 2, 2, 2],
        ]);
        assert_eq!(
            expected,
            actual,
            "missing {:?}",
            // expected.difference(&actual)
            actual.difference(&expected)
        );
    }
}
